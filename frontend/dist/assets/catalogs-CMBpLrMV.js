import{bv as e,ae as c}from"./index--cwzPgFN.js";const n=e("catalogs",{state:()=>({departamentos:[],ciudades:[],tiposEquipo:[],estadosEquipo:[],fabricantes:[],marcasProcesador:[],tiposProcesador:[],generacionesProcesador:[],tiposRam:[],capacidadesRam:[],busesRam:[],tiposAlmacenamiento:[],capacidadesAlmacenamiento:[],protocolosAlmacenamiento:[],factoresFormaAlmacenamiento:[],sistemasOperativos:[],ofimaticas:[],antivirus:[],aplicativos:[],loading:!1,offlineReady:!1}),actions:{async fetchCatalogs(t=[]){this.loading=!0,t.forEach(a=>{const o=localStorage.getItem(`catalog_${a}`);if(o)try{this[a]=JSON.parse(o)}catch(i){console.error(`Error parsing cached catalog ${a}`,i)}});try{const a=[],o={estadosEquipo:"/api/config/catalogs/estados_equipo",tiposEquipo:"/api/config/catalogs/tipos_equipo",fabricantes:"/api/config/catalogs/fabricantes",marcasProcesador:"/api/config/catalogs/marcas_procesador",tiposProcesador:"/api/config/catalogs/tipos_procesador",generacionesProcesador:"/api/config/catalogs/generaciones_procesador",tiposRam:"/api/config/tipos_ram",capacidadesRam:"/api/config/capacidades_ram",busesRam:"/api/config/velocidades_ram",tiposAlmacenamiento:"/api/config/tipos_almacenamiento",capacidadesAlmacenamiento:"/api/config/capacidades_almacenamiento",protocolosAlmacenamiento:"/api/config/protocolos_almacenamiento",factoresFormaAlmacenamiento:"/api/config/factores_forma_almacenamiento",sistemasOperativos:"/api/config/catalogs/sistemas_operativos",ofimaticas:"/api/config/catalogs/ofimaticas",antivirus:"/api/config/catalogs/antivirus",aplicativos:"/api/config/catalogs/aplicativos"};t.forEach(i=>{o[i]&&a.push(c.get(o[i],{withCredentials:!0}).then(s=>{this[i]=s.data,localStorage.setItem(`catalog_${i}`,JSON.stringify(s.data))}))}),await Promise.allSettled(a)}catch(a){console.error("Error updating catalogs from API",a)}finally{this.loading=!1,(this.estadosEquipo.length>0||this.tiposEquipo.length>0||this.fabricantes.length>0||this.sistemasOperativos.length>0||this.ofimaticas.length>0||this.antivirus.length>0||this.aplicativos.length>0)&&(this.offlineReady=!0)}},async createAplicativo(t,a){try{const i={Id:Date.now(),Nombre:t,Version:a};return this.aplicativos.push(i),localStorage.setItem("catalog_aplicativos",JSON.stringify(this.aplicativos)),i}catch(o){throw console.error("Error creating app",o),o}}}});export{n as u};
