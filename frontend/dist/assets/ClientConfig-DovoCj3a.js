import{j as L,d as g,m as M,l as G,c as $,o as k,w as t,a as e,f as l,g as c,t as C,h as K,$ as z,a7 as T,a0 as _,M as X,a1 as Z,e as ee,a2 as te}from"./index-C00rILNG.js";import{V as F,a as Q,b as B,c as P,d as le,U as ae}from"./UserList-B-jZ-HyE.js";import{_ as q,a as I,V as oe,R as ie}from"./index-BZPMV4V2.js";import{a as R,c as U,d as H,e as ne}from"./VCard-CkjxDFEY.js";import{V as D,b as W}from"./index-B7DE2XA0.js";import{e as j}from"./VMenu-SEDkpfpU.js";import{b as Y,V as O,a as x,c as N}from"./VTextField-zX8p1YQR.js";const se={class:"px-6 pt-6 pb-2 d-flex align-center justify-space-between"},de={class:"d-flex align-center"},re={class:"header-icon-box mr-3"},ue={class:"text-h6 font-weight-bold text-grey-darken-3",style:{"line-height":"1.2"}},ce={class:"text-caption text-grey mt-1"},me={class:"d-flex align-center"},pe={__name:"ClientForm",props:{modelValue:Boolean,company:Object},emits:["update:modelValue","saved"],setup(S,{emit:E}){const V=S,A=E,v=L({get:()=>V.modelValue,set:y=>A("update:modelValue",y)}),u=g({NIT:"",RazonSocial:"",Direccion:"",DepartamentoId:null,CiudadId:null,Telefono:"",Activo:!0,EsCliente:!0}),w=g([]),h=g([]),f=g(!1);async function n(){try{const y=await T.get("http://localhost:5000/api/config/departments",{withCredentials:!0});w.value=y.data}catch(y){console.error(y)}}async function p(y){if(!y){h.value=[];return}try{const i=await T.get(`http://localhost:5000/api/config/cities/${y}`,{withCredentials:!0});h.value=i.data}catch(i){console.error(i)}}async function m(){f.value=!0;try{const y=V.company?`http://localhost:5000/api/config/companies/${V.company.Id}`:"http://localhost:5000/api/config/companies",i=V.company?"put":"post";u.value.EsCliente=!0,await T[i](y,u.value,{withCredentials:!0}),A("saved"),v.value=!1}catch(y){alert("Error al guardar: "+(y.response?.data?.message||y.message))}finally{f.value=!1}}return M(()=>V.company,async y=>{y?(u.value={...y,EsCliente:!0},y.DepartamentoId&&p(y.DepartamentoId)):(u.value={NIT:"",RazonSocial:"",Direccion:"",DepartamentoId:null,CiudadId:null,Telefono:"",Activo:!0,EsCliente:!0},h.value=[])}),G(n),(y,i)=>(k(),$(P,{modelValue:v.value,"onUpdate:modelValue":i[9]||(i[9]=s=>v.value=s),"max-width":"600",persistent:""},{default:t(()=>[e(R,{class:"rounded-xl elevation-0"},{default:t(()=>[l("div",se,[l("div",de,[l("div",re,[e(I,{color:"primary",size:"24"},{default:t(()=>[...i[10]||(i[10]=[c("mdi-account-tie",-1)])]),_:1})]),l("div",null,[l("h2",ue,C(S.company?"Editar Cliente":"Registrar Nuevo Cliente"),1),l("p",ce," Complete la información para "+C(S.company?"actualizar el":"dar de alta un nuevo")+" cliente. ",1)])]),e(D,{icon:"mdi-close",variant:"text",color:"grey-darken-1",density:"comfortable",onClick:i[0]||(i[0]=s=>v.value=!1)})]),e(j,{class:"mx-6 my-2"}),e(U,{class:"px-6 py-2 scroll-container",style:{"max-height":"60vh","overflow-y":"auto"}},{default:t(()=>[e(Y,{ref:"form",onSubmit:K(m,["prevent"])},{default:t(()=>[e(O,{dense:""},{default:t(()=>[e(x,{cols:"12",md:"6"},{default:t(()=>[i[11]||(i[11]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"NIT / IDENTIFICACIÓN",-1)),e(N,{modelValue:u.value.NIT,"onUpdate:modelValue":i[1]||(i[1]=s=>u.value.NIT=s),placeholder:"Ej. 900.123.456-7",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-pound","bg-color":"grey-lighten-5",class:"rounded-lg",rules:[s=>!!s||"Requerido"],"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),e(x,{cols:"12",md:"6"},{default:t(()=>[i[12]||(i[12]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"RAZÓN SOCIAL",-1)),e(N,{modelValue:u.value.RazonSocial,"onUpdate:modelValue":i[2]||(i[2]=s=>u.value.RazonSocial=s),placeholder:"Nombre del cliente",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-domain","bg-color":"grey-lighten-5",class:"rounded-lg",rules:[s=>!!s||"Requerido"],"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),e(x,{cols:"12"},{default:t(()=>[i[13]||(i[13]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"DIRECCIÓN PRINCIPAL",-1)),e(N,{modelValue:u.value.Direccion,"onUpdate:modelValue":i[3]||(i[3]=s=>u.value.Direccion=s),placeholder:"Calle, Carrera, Avenida...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker-outline","bg-color":"grey-lighten-5",class:"rounded-lg","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(x,{cols:"12",md:"6"},{default:t(()=>[i[14]||(i[14]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"DEPARTAMENTO",-1)),e(F,{modelValue:u.value.DepartamentoId,"onUpdate:modelValue":[i[4]||(i[4]=s=>u.value.DepartamentoId=s),p],items:w.value,"item-title":"Nombre","item-value":"Id",placeholder:"Seleccionar...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-outline","bg-color":"grey-lighten-5",class:"rounded-lg","hide-details":"auto"},null,8,["modelValue","items"])]),_:1}),e(x,{cols:"12",md:"6"},{default:t(()=>[i[15]||(i[15]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"CIUDAD",-1)),e(F,{modelValue:u.value.CiudadId,"onUpdate:modelValue":i[5]||(i[5]=s=>u.value.CiudadId=s),items:h.value,"item-title":"Nombre","item-value":"Id",placeholder:"Seleccionar...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker-radius-outline","bg-color":"grey-lighten-5",class:"rounded-lg",disabled:!u.value.DepartamentoId,"hide-details":"auto"},null,8,["modelValue","items","disabled"])]),_:1}),e(x,{cols:"12",md:"6"},{default:t(()=>[i[16]||(i[16]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"TELÉFONO DE CONTACTO",-1)),e(N,{modelValue:u.value.Telefono,"onUpdate:modelValue":i[6]||(i[6]=s=>u.value.Telefono=s),placeholder:"(+57) 300 000 0000",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-phone-outline","bg-color":"grey-lighten-5",class:"rounded-lg","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(x,{cols:"12",md:"6"},{default:t(()=>[i[17]||(i[17]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"ESTADO DEL CLIENTE",-1)),l("div",{class:z(["status-box d-flex align-center justify-space-between px-3 py-0 rounded-lg",u.value.Activo?"bg-blue-lighten-5":"bg-grey-lighten-4"])},[l("div",me,[e(I,{color:u.value.Activo?"primary":"grey",class:"mr-2",size:"16"},{default:t(()=>[c(C(u.value.Activo?"mdi-check-circle":"mdi-minus-circle"),1)]),_:1},8,["color"]),l("span",{class:z(["text-caption font-weight-medium",u.value.Activo?"text-primary":"text-grey-darken-1"])},C(u.value.Activo?"Cliente Activo":"Cliente Inactivo"),3)]),e(Q,{modelValue:u.value.Activo,"onUpdate:modelValue":i[7]||(i[7]=s=>u.value.Activo=s),color:"primary","hide-details":"",density:"compact",inset:"",class:"scale-switch"},null,8,["modelValue"])],2)]),_:1})]),_:1})]),_:1},512)]),_:1}),e(H,{class:"px-6 pb-6 pt-4 bg-white"},{default:t(()=>[e(B),e(D,{variant:"text",class:"text-capitalize text-grey-darken-1 mr-2",onClick:i[8]||(i[8]=s=>v.value=!1),density:"comfortable"},{default:t(()=>[...i[18]||(i[18]=[c(" Cancelar ",-1)])]),_:1}),e(D,{color:"blue-grey-darken-4",variant:"flat",class:"text-white text-capitalize rounded-lg px-6",height:"40","prepend-icon":"mdi-content-save-outline",onClick:m,loading:f.value,elevation:"0",density:"comfortable"},{default:t(()=>[c(C(S.company?"Actualizar":"Guardar"),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},ve=q(pe,[["__scopeId","data-v-3783d156"]]),ge={class:"px-8 pt-8 pb-4 d-flex justify-space-between align-start"},fe={key:0,class:"d-flex justify-center align-center py-12"},ye={key:1,class:"d-flex flex-column align-center justify-center py-12 text-center"},be={class:"empty-state-icon mb-6"},xe={class:"plus-badge"},Ce={class:"d-flex justify-space-between align-start mb-3"},Ve={class:"text-subtitle-1 font-weight-bold text-grey-darken-3 text-truncate"},he={class:"text-caption text-grey-darken-1 mb-2 font-weight-medium"},we={class:"text-caption text-grey mb-1 d-flex align-center"},ke={class:"text-truncate"},Ie={class:"text-caption text-grey d-flex align-center"},Se={__name:"ClientList",props:{modelValue:Boolean},emits:["update:modelValue"],setup(S,{emit:E}){const V=S,A=E,v=L({get:()=>V.modelValue,set:s=>A("update:modelValue",s)}),u=g([]),w=g(!1),h=g(""),f=g("all"),n=g(!1),p=g(null);async function m(){w.value=!0;try{const s=await T.get("http://localhost:5000/api/config/companies",{withCredentials:!0});u.value=s.data.filter(o=>o.EsCliente===!0)}catch(s){console.error(s)}finally{w.value=!1}}const y=L(()=>u.value.filter(s=>{const o=s.RazonSocial?.toLowerCase().includes(h.value.toLowerCase())||s.NIT?.includes(h.value),a=f.value==="all"?!0:f.value==="active"?s.Activo:!s.Activo;return o&&a}));function i(s){p.value=s,n.value=!0}return M(v,s=>{s&&m()},{immediate:!0}),G(()=>{v.value&&m()}),(s,o)=>(k(),$(P,{modelValue:v.value,"onUpdate:modelValue":o[6]||(o[6]=a=>v.value=a),"max-width":"1100",height:"auto",scrollable:"",transition:"dialog-bottom-transition"},{default:t(()=>[e(R,{class:"rounded-xl elevation-24"},{default:t(()=>[l("div",ge,[o[7]||(o[7]=l("div",null,[l("h2",{class:"text-h5 font-weight-bold text-grey-darken-3 mb-1"},"Directorio de Clientes"),l("p",{class:"text-body-2 text-grey"},"Gestiona el listado de clientes registrados en el sistema.")],-1)),e(D,{icon:"mdi-close",variant:"text",color:"grey",onClick:o[0]||(o[0]=a=>v.value=!1)})]),e(j,{class:"mx-8"}),e(U,{class:"px-8 py-6 bg-grey-lighten-5"},{default:t(()=>[e(O,{class:"mb-6 align-center"},{default:t(()=>[e(x,{cols:"12",md:"5"},{default:t(()=>[e(N,{modelValue:h.value,"onUpdate:modelValue":o[1]||(o[1]=a=>h.value=a),"prepend-inner-icon":"mdi-magnify",label:"Buscar por NIT o Razón Social",variant:"outlined",density:"compact","hide-details":"","bg-color":"white",color:"primary",class:"rounded-lg"},null,8,["modelValue"])]),_:1}),e(x,{cols:"12",md:"3"},{default:t(()=>[e(le,{modelValue:f.value,"onUpdate:modelValue":o[2]||(o[2]=a=>f.value=a),items:[{title:"Todos los estados",value:"all"},{title:"Activos",value:"active"},{title:"Inactivos",value:"inactive"}],label:"Estado",variant:"outlined",density:"compact","hide-details":"","bg-color":"white",color:"primary",class:"rounded-lg"},null,8,["modelValue"])]),_:1}),e(B),e(x,{cols:"12",md:"auto"},{default:t(()=>[e(D,{color:"#1e293b",class:"text-white text-capitalize rounded-lg",height:"40","prepend-icon":"mdi-plus",elevation:"0",onClick:o[3]||(o[3]=a=>i(null))},{default:t(()=>[...o[8]||(o[8]=[c(" Nuevo Cliente ",-1)])]),_:1})]),_:1})]),_:1}),w.value?(k(),_("div",fe,[e(W,{indeterminate:"",color:"primary",size:"64"})])):y.value.length===0?(k(),_("div",ye,[l("div",be,[e(I,{size:"48",color:"primary"},{default:t(()=>[...o[9]||(o[9]=[c("mdi-account-tie-outline",-1)])]),_:1}),l("div",xe,[e(I,{size:"16",color:"white"},{default:t(()=>[...o[10]||(o[10]=[c("mdi-plus",-1)])]),_:1})])]),o[12]||(o[12]=l("h3",{class:"text-h6 font-weight-bold text-grey-darken-3 mb-2"},"No se encontraron clientes",-1)),o[13]||(o[13]=l("p",{class:"text-body-2 text-grey mb-8",style:{"max-width":"400px"}}," Aún no has registrado ningún cliente. Comienza agregando el primero para gestionar sus sedes y contactos. ",-1)),e(D,{color:"primary",variant:"tonal",class:"text-capitalize rounded-lg px-6",height:"44","prepend-icon":"mdi-plus",onClick:o[4]||(o[4]=a=>i(null))},{default:t(()=>[...o[11]||(o[11]=[c(" Agregar mi primer cliente ",-1)])]),_:1})])):(k(),$(O,{key:2},{default:t(()=>[(k(!0),_(X,null,Z(y.value,a=>(k(),$(x,{cols:"12",sm:"6",md:"4",lg:"3",key:a.Id},{default:t(()=>[e(R,{hover:"",onClick:d=>i(a),class:"company-card border-0 elevation-1 h-100 rounded-lg"},{default:t(()=>[l("div",{class:z(["card-status-strip",a.Activo?"bg-success":"bg-grey"])},null,2),e(U,{class:"pa-5"},{default:t(()=>[l("div",Ce,[l("div",Ve,C(a.RazonSocial),1)]),l("div",he," NIT: "+C(a.NIT),1),e(j,{class:"mb-3"}),l("div",we,[e(I,{size:"small",start:"",class:"mr-1",color:"grey-lighten-1"},{default:t(()=>[...o[14]||(o[14]=[c("mdi-map-marker",-1)])]),_:1}),l("span",ke,C(a.Direccion||"Sin dirección"),1)]),l("div",Ie,[e(I,{size:"small",start:"",class:"mr-1",color:"grey-lighten-1"},{default:t(()=>[...o[15]||(o[15]=[c("mdi-phone",-1)])]),_:1}),c(" "+C(a.Telefono||"Sin teléfono"),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1}),e(ve,{modelValue:n.value,"onUpdate:modelValue":o[5]||(o[5]=a=>n.value=a),company:p.value,onSaved:m},null,8,["modelValue","company"])]),_:1},8,["modelValue"]))}},Ae=q(Se,[["__scopeId","data-v-8504e05e"]]),De={class:"px-6 pt-6 pb-2 d-flex align-center justify-space-between"},Ee={class:"d-flex align-center"},$e={class:"header-icon-box mr-3"},Ne={class:"text-h6 font-weight-bold text-grey-darken-3",style:{"line-height":"1.2"}},Te={class:"text-caption text-grey mt-1"},ze={class:"d-flex align-center"},Re={__name:"ClientSedeForm",props:{modelValue:Boolean,sede:Object,companies:Array},emits:["update:modelValue","save"],setup(S,{emit:E}){const V=S,A=E,v=L({get:()=>V.modelValue,set:o=>A("update:modelValue",o)}),u=g(null),w=g(!1),h=g([]),f=g([]),n=g(null),p=L(()=>V.companies.filter(o=>o.EsCliente===!0)),m=g({EmpresaId:null,NombreSede:"",Direccion:"",Telefono:"",CiudadId:null,Activo:!0});async function y(){try{const o=await T.get("http://localhost:5000/api/config/departments",{withCredentials:!0});h.value=o.data}catch(o){console.error(o)}}async function i(o){if(!o){f.value=[];return}try{const a=await T.get(`http://localhost:5000/api/config/cities/${o}`,{withCredentials:!0});f.value=a.data}catch(a){console.error(a)}}async function s(){const{valid:o}=await u.value.validate();if(o){w.value=!0;try{const a=V.sede?`http://localhost:5000/api/config/sedes/${V.sede.Id}`:"http://localhost:5000/api/config/sedes",d=V.sede?"put":"post";await T[d](a,m.value,{withCredentials:!0}),A("save"),v.value=!1}catch(a){alert("Error al guardar: "+(a.response?.data?.message||a.message))}finally{w.value=!1}}}return M(()=>V.sede,async o=>{o?(m.value={...o},n.value=null,f.value=[]):(m.value={EmpresaId:null,NombreSede:"",Direccion:"",Telefono:"",CiudadId:null,Activo:!0},n.value=null,f.value=[])}),G(()=>{y()}),(o,a)=>(k(),$(P,{modelValue:v.value,"onUpdate:modelValue":a[9]||(a[9]=d=>v.value=d),"max-width":"600",persistent:""},{default:t(()=>[e(R,{class:"rounded-xl elevation-0"},{default:t(()=>[l("div",De,[l("div",Ee,[l("div",$e,[e(I,{color:"primary",size:"24"},{default:t(()=>[...a[10]||(a[10]=[c("mdi-office-building-marker",-1)])]),_:1})]),l("div",null,[l("h2",Ne,C(S.sede?"Editar Sede de Cliente":"Registrar Sede de Cliente"),1),l("p",Te," Complete la información para "+C(S.sede?"actualizar la":"dar de alta una nueva")+" sede operativa. ",1)])]),e(D,{icon:"mdi-close",variant:"text",color:"grey-darken-1",density:"comfortable",onClick:a[0]||(a[0]=d=>v.value=!1)})]),e(j,{class:"mx-6 my-2"}),e(U,{class:"px-6 py-2 scroll-container",style:{"max-height":"60vh","overflow-y":"auto"}},{default:t(()=>[e(Y,{ref_key:"form",ref:u,onSubmit:K(s,["prevent"])},{default:t(()=>[e(O,{dense:""},{default:t(()=>[e(x,{cols:"12"},{default:t(()=>[a[11]||(a[11]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"CLIENTE ASOCIADO",-1)),e(F,{modelValue:m.value.EmpresaId,"onUpdate:modelValue":a[1]||(a[1]=d=>m.value.EmpresaId=d),items:p.value,"item-title":"RazonSocial","item-value":"Id",placeholder:"Seleccionar cliente...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-account-tie","bg-color":"grey-lighten-5",class:"rounded-lg",rules:[d=>!!d||"Requerido"],"hide-details":"auto"},null,8,["modelValue","items","rules"])]),_:1}),e(x,{cols:"12"},{default:t(()=>[a[12]||(a[12]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"NOMBRE DE LA SEDE",-1)),e(N,{modelValue:m.value.NombreSede,"onUpdate:modelValue":a[2]||(a[2]=d=>m.value.NombreSede=d),placeholder:"Ej. Sede Principal, Planta Norte...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-store-marker-outline","bg-color":"grey-lighten-5",class:"rounded-lg",rules:[d=>!!d||"Requerido"],"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),e(x,{cols:"12",md:"6"},{default:t(()=>[a[13]||(a[13]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"DEPARTAMENTO",-1)),e(F,{modelValue:n.value,"onUpdate:modelValue":[a[3]||(a[3]=d=>n.value=d),i],items:h.value,"item-title":"Nombre","item-value":"Id",placeholder:"Seleccionar...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-outline","bg-color":"grey-lighten-5",class:"rounded-lg","hide-details":"auto"},null,8,["modelValue","items"])]),_:1}),e(x,{cols:"12",md:"6"},{default:t(()=>[a[14]||(a[14]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"CIUDAD",-1)),e(F,{modelValue:m.value.CiudadId,"onUpdate:modelValue":a[4]||(a[4]=d=>m.value.CiudadId=d),items:f.value,"item-title":"Nombre","item-value":"Id",placeholder:"Seleccionar...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker-radius-outline","bg-color":"grey-lighten-5",class:"rounded-lg",disabled:!n.value,rules:[d=>!!d||"Requerido"],"hide-details":"auto"},null,8,["modelValue","items","disabled","rules"])]),_:1}),e(x,{cols:"12"},{default:t(()=>[a[15]||(a[15]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"DIRECCIÓN FÍSICA",-1)),e(N,{modelValue:m.value.Direccion,"onUpdate:modelValue":a[5]||(a[5]=d=>m.value.Direccion=d),placeholder:"Calle, Carrera, Avenida...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker-outline","bg-color":"grey-lighten-5",class:"rounded-lg","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(x,{cols:"12",md:"6"},{default:t(()=>[a[16]||(a[16]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"TELÉFONO DE CONTACTO",-1)),e(N,{modelValue:m.value.Telefono,"onUpdate:modelValue":a[6]||(a[6]=d=>m.value.Telefono=d),placeholder:"(+57) 601 000 0000",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-phone-outline","bg-color":"grey-lighten-5",class:"rounded-lg","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(x,{cols:"12",md:"6"},{default:t(()=>[a[17]||(a[17]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"ESTADO DE LA SEDE",-1)),l("div",{class:z(["status-box d-flex align-center justify-space-between px-3 py-0 rounded-lg",m.value.Activo?"bg-blue-lighten-5":"bg-grey-lighten-4"])},[l("div",ze,[e(I,{color:m.value.Activo?"primary":"grey",class:"mr-2",size:"16"},{default:t(()=>[c(C(m.value.Activo?"mdi-check-circle":"mdi-minus-circle"),1)]),_:1},8,["color"]),l("span",{class:z(["text-caption font-weight-medium",m.value.Activo?"text-primary":"text-grey-darken-1"])},C(m.value.Activo?"Sede Activa":"Sede Inactiva"),3)]),e(Q,{modelValue:m.value.Activo,"onUpdate:modelValue":a[7]||(a[7]=d=>m.value.Activo=d),color:"primary","hide-details":"",density:"compact",inset:"",class:"scale-switch"},null,8,["modelValue"])],2)]),_:1})]),_:1})]),_:1},512)]),_:1}),e(H,{class:"px-6 pb-6 pt-4 bg-white"},{default:t(()=>[e(B),e(D,{variant:"text",class:"text-capitalize text-grey-darken-1 mr-2",onClick:a[8]||(a[8]=d=>v.value=!1),density:"comfortable"},{default:t(()=>[...a[18]||(a[18]=[c(" Cancelar ",-1)])]),_:1}),e(D,{color:"blue-grey-darken-4",variant:"flat",class:"text-white text-capitalize rounded-lg px-6",height:"40","prepend-icon":"mdi-content-save-outline",onClick:s,loading:w.value,elevation:"0",density:"comfortable"},{default:t(()=>[c(C(S.sede?"Actualizar":"Guardar"),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Ue=q(Re,[["__scopeId","data-v-6f3e4f3b"]]),_e={class:"px-8 pt-8 pb-4 d-flex justify-space-between align-start"},Le={key:0,class:"d-flex justify-center align-center py-12"},Oe={key:1,class:"d-flex flex-column align-center justify-center py-12 text-center"},je={class:"empty-state-icon mb-6"},Fe={class:"plus-badge"},Be={class:"d-flex justify-space-between align-start mb-3"},Pe={class:"text-subtitle-1 font-weight-bold text-grey-darken-3 text-truncate"},qe={class:"text-caption text-grey-darken-1 mb-2 font-weight-medium d-flex align-center"},Me={class:"text-truncate"},Ge={class:"text-caption text-grey mb-1 d-flex align-center"},Xe={class:"text-truncate"},Ze={class:"text-caption text-grey d-flex align-center"},He={__name:"ClientSedeList",props:{modelValue:Boolean},emits:["update:modelValue"],setup(S,{emit:E}){const V=S,A=E,v=L({get:()=>V.modelValue,set:d=>A("update:modelValue",d)}),u=g([]),w=g([]),h=g(""),f=g(!1),n=g(null),p=g(!1),m=L(()=>{let d=u.value.filter(r=>{const b=w.value.find(J=>J.Id===r.EmpresaId);return b&&b.EsCliente===!0});if(h.value){const r=h.value.toLowerCase();d=d.filter(b=>b.NombreSede.toLowerCase().includes(r)||b.Direccion&&b.Direccion.toLowerCase().includes(r))}return d});function y(d){const r=w.value.find(b=>b.Id===d);return r?r.RazonSocial:"Desconocida"}async function i(){p.value=!0;try{const[d,r]=await Promise.all([T.get("http://localhost:5000/api/config/sedes",{withCredentials:!0}),T.get("http://localhost:5000/api/config/companies",{withCredentials:!0})]);u.value=d.data,w.value=r.data}catch(d){console.error("Error cargando datos:",d)}finally{p.value=!1}}function s(){n.value=null,f.value=!0}function o(d){n.value={...d},f.value=!0}async function a(){await i(),f.value=!1}return M(v,d=>{d&&i()},{immediate:!0}),G(()=>{v.value&&i()}),(d,r)=>(k(),$(P,{modelValue:v.value,"onUpdate:modelValue":r[3]||(r[3]=b=>v.value=b),"max-width":"1100",height:"auto",scrollable:"",transition:"dialog-bottom-transition"},{default:t(()=>[e(R,{class:"rounded-xl elevation-24"},{default:t(()=>[l("div",_e,[r[4]||(r[4]=l("div",null,[l("h2",{class:"text-h5 font-weight-bold text-grey-darken-3 mb-1"},"Sedes de Clientes"),l("p",{class:"text-body-2 text-grey"},"Gestiona las ubicaciones y oficinas de tus clientes.")],-1)),e(D,{icon:"mdi-close",variant:"text",color:"grey",onClick:r[0]||(r[0]=b=>v.value=!1)})]),e(j,{class:"mx-8"}),e(U,{class:"px-8 py-6 bg-grey-lighten-5"},{default:t(()=>[e(O,{class:"mb-6 align-center"},{default:t(()=>[e(x,{cols:"12",md:"5"},{default:t(()=>[e(N,{modelValue:h.value,"onUpdate:modelValue":r[1]||(r[1]=b=>h.value=b),"prepend-inner-icon":"mdi-magnify",label:"Buscar por nombre o dirección",variant:"outlined",density:"compact","hide-details":"","bg-color":"white",color:"primary",class:"rounded-lg"},null,8,["modelValue"])]),_:1}),e(B),e(x,{cols:"12",md:"auto"},{default:t(()=>[e(D,{color:"#1e293b",class:"text-white text-capitalize rounded-lg",height:"40","prepend-icon":"mdi-plus",elevation:"0",onClick:s},{default:t(()=>[...r[5]||(r[5]=[c(" Nueva Sede ",-1)])]),_:1})]),_:1})]),_:1}),p.value?(k(),_("div",Le,[e(W,{indeterminate:"",color:"primary",size:"64"})])):m.value.length===0?(k(),_("div",Oe,[l("div",je,[e(I,{size:"48",color:"primary"},{default:t(()=>[...r[6]||(r[6]=[c("mdi-office-building-marker-outline",-1)])]),_:1}),l("div",Fe,[e(I,{size:"16",color:"white"},{default:t(()=>[...r[7]||(r[7]=[c("mdi-plus",-1)])]),_:1})])]),r[9]||(r[9]=l("h3",{class:"text-h6 font-weight-bold text-grey-darken-3 mb-2"},"No se encontraron sedes",-1)),r[10]||(r[10]=l("p",{class:"text-body-2 text-grey mb-8",style:{"max-width":"400px"}}," No hay sedes de clientes registradas que coincidan con tu búsqueda. ",-1)),e(D,{color:"primary",variant:"tonal",class:"text-capitalize rounded-lg px-6",height:"44","prepend-icon":"mdi-plus",onClick:s},{default:t(()=>[...r[8]||(r[8]=[c(" Agregar primera sede ",-1)])]),_:1})])):(k(),$(O,{key:2},{default:t(()=>[(k(!0),_(X,null,Z(m.value,b=>(k(),$(x,{cols:"12",sm:"6",md:"4",lg:"3",key:b.Id},{default:t(()=>[e(R,{hover:"",onClick:J=>o(b),class:"company-card border-0 elevation-1 h-100 rounded-lg"},{default:t(()=>[l("div",{class:z(["card-status-strip",b.Activo?"bg-success":"bg-grey"])},null,2),e(U,{class:"pa-5"},{default:t(()=>[l("div",Be,[l("div",Pe,C(b.NombreSede),1)]),l("div",qe,[e(I,{size:"small",start:"",class:"mr-1"},{default:t(()=>[...r[11]||(r[11]=[c("mdi-account-tie",-1)])]),_:1}),l("span",Me,C(y(b.EmpresaId)),1)]),e(j,{class:"mb-3"}),l("div",Ge,[e(I,{size:"small",start:"",class:"mr-1",color:"grey-lighten-1"},{default:t(()=>[...r[12]||(r[12]=[c("mdi-map-marker",-1)])]),_:1}),l("span",Xe,C(b.Direccion||"Sin dirección"),1)]),l("div",Ze,[e(I,{size:"small",start:"",class:"mr-1",color:"grey-lighten-1"},{default:t(()=>[...r[13]||(r[13]=[c("mdi-phone",-1)])]),_:1}),c(" "+C(b.Telefono||"Sin teléfono"),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1}),e(Ue,{modelValue:f.value,"onUpdate:modelValue":r[2]||(r[2]=b=>f.value=b),sede:n.value,companies:w.value,onSave:a},null,8,["modelValue","sede","companies"])]),_:1},8,["modelValue"]))}},Je=q(He,[["__scopeId","data-v-2e80851e"]]),Ke={class:"w-100"},Qe={class:"mb-8"},We={class:"text-caption text-grey mb-1"},Ye={class:"mb-8"},et={class:"d-flex align-center mb-4"},tt={class:"text-subtitle-2 font-weight-bold text-grey-darken-3 mb-0 line-height-tight"},lt={__name:"ClientConfig",setup(S){ee();const E=g(!1),V=g(!1),A=g(!1),v=g(!1),u=g(""),w=[{title:"Clientes",icon:"mdi-account-tie",action:"clients",color:"indigo"},{title:"Sedes Clientes",icon:"mdi-office-building-marker",action:"client_sedes",color:"indigo"},{title:"Contactos",icon:"mdi-card-account-details",action:"contacts",color:"indigo"}];function h(f){if(f.action==="contacts"){V.value=!0;return}if(f.action==="clients"){A.value=!0;return}if(f.action==="client_sedes"){v.value=!0;return}u.value=f.title,E.value=!0}return(f,n)=>(k(),$(oe,{fluid:"",class:"bg-grey-lighten-5 fill-height align-start"},{default:t(()=>[l("div",Ke,[l("div",Qe,[l("div",We,[e(I,{size:"small",class:"mr-1"},{default:t(()=>[...n[5]||(n[5]=[c("mdi-home",-1)])]),_:1}),n[6]||(n[6]=c(" / Configuración / Clientes ",-1))]),n[7]||(n[7]=l("h1",{class:"text-h4 font-weight-bold text-primary mb-1"}," Gestión de Clientes ",-1)),n[8]||(n[8]=l("p",{class:"text-body-1 text-grey-darken-1"}," Administra el directorio de clientes, sus sedes y contactos. ",-1))]),l("div",Ye,[l("div",et,[e(I,{color:"primary",class:"mr-2"},{default:t(()=>[...n[9]||(n[9]=[c("mdi-account-group",-1)])]),_:1}),n[10]||(n[10]=l("h2",{class:"text-h6 font-weight-bold text-grey-darken-3"},"Directorio",-1))]),e(O,null,{default:t(()=>[(k(),_(X,null,Z(w,p=>e(x,{cols:"12",sm:"6",md:"3",lg:"2",key:p.title},{default:t(()=>[te((k(),$(R,{class:"config-card border-0 elevation-1",height:"120",onClick:m=>h(p)},{default:t(()=>[l("div",{class:z(["card-corner-decoration",`bg-${p.color}-lighten-5`])},[e(I,{size:"small",color:p.color},{default:t(()=>[...n[11]||(n[11]=[c("mdi-chevron-right",-1)])]),_:1},8,["color"])],2),e(U,{class:"pa-3 d-flex flex-column justify-space-between h-100"},{default:t(()=>[l("div",{class:z(["icon-box",`bg-${p.color}-lighten-5`])},[e(I,{size:"24",color:p.color},{default:t(()=>[c(C(p.icon),1)]),_:2},1032,["color"])],2),l("div",null,[l("div",tt,C(p.title),1),n[12]||(n[12]=l("div",{class:"text-caption text-grey",style:{"font-size":"0.7rem !important"}},"Administrar",-1))])]),_:2},1024)]),_:2},1032,["onClick"])),[[ie]])]),_:2},1024)),64))]),_:1})])]),e(P,{modelValue:E.value,"onUpdate:modelValue":n[1]||(n[1]=p=>E.value=p),"max-width":"600"},{default:t(()=>[e(R,null,{default:t(()=>[e(ne,null,{default:t(()=>[...n[13]||(n[13]=[c("En Construcción",-1)])]),_:1}),e(U,null,{default:t(()=>[n[14]||(n[14]=c(" La funcionalidad ",-1)),l("strong",null,C(u.value),1),n[15]||(n[15]=c(" está siendo implementada. ",-1))]),_:1}),e(H,null,{default:t(()=>[e(B),e(D,{color:"primary",onClick:n[0]||(n[0]=p=>E.value=!1)},{default:t(()=>[...n[16]||(n[16]=[c("Cerrar",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ae,{modelValue:V.value,"onUpdate:modelValue":n[2]||(n[2]=p=>V.value=p),"filter-roles":["ADMINISTRADOR CLIENTE","SOPORTE CLIENTE","AUDITOR EXTERNO"],title:"Gestión de Contactos","client-mode":""},null,8,["modelValue"]),e(Ae,{modelValue:A.value,"onUpdate:modelValue":n[3]||(n[3]=p=>A.value=p)},null,8,["modelValue"]),e(Je,{modelValue:v.value,"onUpdate:modelValue":n[4]||(n[4]=p=>v.value=p)},null,8,["modelValue"])]),_:1}))}},ut=q(lt,[["__scopeId","data-v-bc1242f7"]]);export{ut as default};
