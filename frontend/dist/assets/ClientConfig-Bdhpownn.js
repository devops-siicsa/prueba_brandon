import{k as j,d as f,n as Z,m as H,c as _,o as I,w as t,a as e,a8 as $,aa as V,f as l,g as A,h as c,t as h,ad as J,i as ee,ae as U,a7 as z,af as te,W as q,a9 as K,e as oe,aI as ie}from"./index--cwzPgFN.js";import{V as G,U as ne}from"./UserList-BqASrbP5.js";import{u as W,b as L,c as B,d as O,e as Q,f as se}from"./useMobileDetection-DVtk2gMU.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as N,R as de}from"./VGrid-Bvk_EzwB.js";import{V as le}from"./VForm-Dx6NHo9p.js";import{V as F,a as C,b as R}from"./VTextField-oy8GBoI6.js";import{V as P,a as ae,b as re}from"./VSwitch-DeZFYIz0.js";import{V as M}from"./VDialog-BMR7tClG.js";import{V as ue}from"./VContainer-B_ZFSiXZ.js";import"./VChip-hM0WfqDl.js";import"./index-BvfS-qSn.js";import"./VAlert-Conwkj8S.js";import"./VList-ClXTKyiG.js";import"./VMenu-Cdl4H-mK.js";const ce={class:"px-6 pt-6 pb-2 d-flex align-center justify-space-between"},me={class:"d-flex align-center"},pe={class:"header-icon-box mr-3"},ve={class:"text-h6 font-weight-bold text-grey-darken-3",style:{"line-height":"1.2"}},ge={class:"text-caption text-grey mt-1"},fe={class:"d-flex align-center"},ye={__name:"ClientForm",props:{modelValue:Boolean,company:Object},emits:["update:modelValue","saved"],setup(D,{emit:T}){const w=D,{isMobileApp:v}=W(),E=T,g=j({get:()=>w.modelValue,set:b=>E("update:modelValue",b)}),u=f({NIT:"",RazonSocial:"",Direccion:"",DepartamentoId:null,CiudadId:null,Telefono:"",Activo:!0,EsCliente:!0}),S=f([]),k=f([]),y=f(!1);async function n(){try{const b=await U.get("/api/config/departments",{withCredentials:!0});S.value=b.data}catch(b){console.error(b)}}async function m(b){if(!b){k.value=[];return}try{const i=await U.get(`/api/config/cities/${b}`,{withCredentials:!0});k.value=i.data}catch(i){console.error(i)}}async function p(){y.value=!0;try{const b=w.company?`/api/config/companies/${w.company.Id}`:"/api/config/companies",i=w.company?"put":"post";u.value.EsCliente=!0,await U[i](b,u.value,{withCredentials:!0}),E("saved"),g.value=!1}catch(b){alert("Error al guardar: "+(b.response?.data?.message||b.message))}finally{y.value=!1}}return Z(()=>w.company,async b=>{b?(u.value={...b,EsCliente:!0},b.DepartamentoId&&m(b.DepartamentoId)):(u.value={NIT:"",RazonSocial:"",Direccion:"",DepartamentoId:null,CiudadId:null,Telefono:"",Activo:!0,EsCliente:!0},k.value=[])}),H(n),(b,i)=>(I(),_(M,{modelValue:g.value,"onUpdate:modelValue":i[9]||(i[9]=s=>g.value=s),"max-width":V(v)?"100%":"600",fullscreen:V(v),transition:V(v)?"dialog-bottom-transition":"dialog-transition",persistent:""},{default:t(()=>[e(L,{class:$(["rounded-xl elevation-0",{"rounded-0":V(v)}])},{default:t(()=>[l("div",ce,[l("div",me,[l("div",pe,[e(A,{color:"primary",size:"24"},{default:t(()=>[...i[10]||(i[10]=[c("mdi-account-tie",-1)])]),_:1})]),l("div",null,[l("h2",ve,h(D.company?"Editar Cliente":"Registrar Nuevo Cliente"),1),l("p",ge," Complete la información para "+h(D.company?"actualizar el":"dar de alta un nuevo")+" cliente. ",1)])]),e(N,{icon:"mdi-close",variant:"text",color:"grey-darken-1",density:"comfortable",onClick:i[0]||(i[0]=s=>g.value=!1)})]),e(B,{class:"mx-6 my-2"}),e(O,{class:"px-6 py-2 scroll-container",style:J(V(v)?"height: calc(100vh - 140px); overflow-y: auto;":"max-height: 60vh; overflow-y: auto;")},{default:t(()=>[e(le,{ref:"form",onSubmit:ee(p,["prevent"])},{default:t(()=>[e(F,{dense:""},{default:t(()=>[e(C,{cols:"12",md:"6"},{default:t(()=>[i[11]||(i[11]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"NIT / IDENTIFICACIÓN",-1)),e(R,{modelValue:u.value.NIT,"onUpdate:modelValue":i[1]||(i[1]=s=>u.value.NIT=s),placeholder:"Ej. 900.123.456-7",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-pound","bg-color":"grey-lighten-5",class:"rounded-lg",rules:[s=>!!s||"Requerido"],"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),e(C,{cols:"12",md:"6"},{default:t(()=>[i[12]||(i[12]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"RAZÓN SOCIAL",-1)),e(R,{modelValue:u.value.RazonSocial,"onUpdate:modelValue":i[2]||(i[2]=s=>u.value.RazonSocial=s),placeholder:"Nombre del cliente",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-domain","bg-color":"grey-lighten-5",class:"rounded-lg",rules:[s=>!!s||"Requerido"],"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[i[13]||(i[13]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"DIRECCIÓN PRINCIPAL",-1)),e(R,{modelValue:u.value.Direccion,"onUpdate:modelValue":i[3]||(i[3]=s=>u.value.Direccion=s),placeholder:"Calle, Carrera, Avenida...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker-outline","bg-color":"grey-lighten-5",class:"rounded-lg","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",md:"6"},{default:t(()=>[i[14]||(i[14]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"DEPARTAMENTO",-1)),e(P,{modelValue:u.value.DepartamentoId,"onUpdate:modelValue":[i[4]||(i[4]=s=>u.value.DepartamentoId=s),m],items:S.value,"item-title":"Nombre","item-value":"Id",placeholder:"Seleccionar...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-outline","bg-color":"grey-lighten-5",class:"rounded-lg","hide-details":"auto"},null,8,["modelValue","items"])]),_:1}),e(C,{cols:"12",md:"6"},{default:t(()=>[i[15]||(i[15]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"CIUDAD",-1)),e(P,{modelValue:u.value.CiudadId,"onUpdate:modelValue":i[5]||(i[5]=s=>u.value.CiudadId=s),items:k.value,"item-title":"Nombre","item-value":"Id",placeholder:"Seleccionar...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker-radius-outline","bg-color":"grey-lighten-5",class:"rounded-lg",disabled:!u.value.DepartamentoId,"hide-details":"auto"},null,8,["modelValue","items","disabled"])]),_:1}),e(C,{cols:"12",md:"6"},{default:t(()=>[i[16]||(i[16]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"TELÉFONO DE CONTACTO",-1)),e(R,{modelValue:u.value.Telefono,"onUpdate:modelValue":i[6]||(i[6]=s=>u.value.Telefono=s),placeholder:"(+57) 300 000 0000",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-phone-outline","bg-color":"grey-lighten-5",class:"rounded-lg","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",md:"6"},{default:t(()=>[i[17]||(i[17]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"ESTADO DEL CLIENTE",-1)),l("div",{class:$(["status-box d-flex align-center justify-space-between px-3 py-0 rounded-lg",u.value.Activo?"bg-blue-lighten-5":"bg-grey-lighten-4"])},[l("div",fe,[e(A,{color:u.value.Activo?"primary":"grey",class:"mr-2",size:"16"},{default:t(()=>[c(h(u.value.Activo?"mdi-check-circle":"mdi-minus-circle"),1)]),_:1},8,["color"]),l("span",{class:$(["text-caption font-weight-medium",u.value.Activo?"text-primary":"text-grey-darken-1"])},h(u.value.Activo?"Cliente Activo":"Cliente Inactivo"),3)]),e(ae,{modelValue:u.value.Activo,"onUpdate:modelValue":i[7]||(i[7]=s=>u.value.Activo=s),color:"primary","hide-details":"",density:"compact",inset:"",class:"scale-switch"},null,8,["modelValue"])],2)]),_:1})]),_:1})]),_:1},512)]),_:1},8,["style"]),e(Q,{class:"px-6 pb-6 pt-4 bg-white"},{default:t(()=>[e(G),e(N,{variant:"text",class:"text-capitalize text-grey-darken-1 mr-2",onClick:i[8]||(i[8]=s=>g.value=!1),density:"comfortable"},{default:t(()=>[...i[18]||(i[18]=[c(" Cancelar ",-1)])]),_:1}),e(N,{color:"blue-grey-darken-4",variant:"flat",class:"text-white text-capitalize rounded-lg px-6",height:"40","prepend-icon":"mdi-content-save-outline",onClick:p,loading:y.value,elevation:"0",density:"comfortable"},{default:t(()=>[c(h(D.company?"Actualizar":"Guardar"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["class"])]),_:1},8,["modelValue","max-width","fullscreen","transition"]))}},be=X(ye,[["__scopeId","data-v-016c5164"]]),xe={class:"px-8 pt-8 pb-4 d-flex justify-space-between align-start"},Ve={key:0,class:"d-flex justify-center align-center py-12"},Ce={key:1,class:"d-flex flex-column align-center justify-center py-12 text-center"},we={class:"empty-state-icon mb-6"},he={class:"plus-badge"},ke={class:"d-flex justify-space-between align-start mb-3"},Ie={class:"text-subtitle-1 font-weight-bold text-grey-darken-3 text-truncate"},Ae={class:"text-caption text-grey-darken-1 mb-2 font-weight-medium"},Se={class:"text-caption text-grey mb-1 d-flex align-center"},De={class:"text-truncate"},Ee={class:"text-caption text-grey d-flex align-center"},Ne={__name:"ClientList",props:{modelValue:Boolean},emits:["update:modelValue"],setup(D,{emit:T}){const w=D,{isMobileApp:v}=W(),E=T,g=j({get:()=>w.modelValue,set:s=>E("update:modelValue",s)}),u=f([]),S=f(!1),k=f(""),y=f("all"),n=f(!1),m=f(null);async function p(){S.value=!0;try{const s=await U.get("/api/config/companies",{withCredentials:!0});u.value=s.data.filter(o=>o.EsCliente===!0)}catch(s){console.error(s)}finally{S.value=!1}}const b=j(()=>u.value.filter(s=>{const o=s.RazonSocial?.toLowerCase().includes(k.value.toLowerCase())||s.NIT?.includes(k.value),a=y.value==="all"?!0:y.value==="active"?s.Activo:!s.Activo;return o&&a}));function i(s){m.value=s,n.value=!0}return Z(g,s=>{s&&p()},{immediate:!0}),H(()=>{g.value&&p()}),(s,o)=>(I(),z(q,null,[e(M,{modelValue:g.value,"onUpdate:modelValue":o[5]||(o[5]=a=>g.value=a),"max-width":V(v)?"100%":"1100",fullscreen:V(v),transition:V(v)?"dialog-bottom-transition":"dialog-transition",scrollable:""},{default:t(()=>[e(L,{class:$(["rounded-xl elevation-24",{"rounded-0":V(v)}])},{default:t(()=>[l("div",xe,[o[7]||(o[7]=l("div",null,[l("h2",{class:"text-h5 font-weight-bold text-grey-darken-3 mb-1"},"Directorio de Clientes"),l("p",{class:"text-body-2 text-grey"},"Gestiona el listado de clientes registrados en el sistema.")],-1)),e(N,{icon:"mdi-close",variant:"text",color:"grey",onClick:o[0]||(o[0]=a=>g.value=!1)})]),e(B,{class:"mx-8"}),e(O,{class:"px-8 py-6 bg-grey-lighten-5",style:J(V(v)?"height: calc(100vh - 140px);":"")},{default:t(()=>[e(F,{class:"mb-6 align-center"},{default:t(()=>[e(C,{cols:"12",md:"5"},{default:t(()=>[e(R,{modelValue:k.value,"onUpdate:modelValue":o[1]||(o[1]=a=>k.value=a),"prepend-inner-icon":"mdi-magnify",label:"Buscar por NIT o Razón Social",variant:"outlined",density:"compact","hide-details":"","bg-color":"white",color:"primary",class:"rounded-lg"},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",md:"3"},{default:t(()=>[e(re,{modelValue:y.value,"onUpdate:modelValue":o[2]||(o[2]=a=>y.value=a),items:[{title:"Todos los estados",value:"all"},{title:"Activos",value:"active"},{title:"Inactivos",value:"inactive"}],label:"Estado",variant:"outlined",density:"compact","hide-details":"","bg-color":"white",color:"primary",class:"rounded-lg"},null,8,["modelValue"])]),_:1}),e(G),e(C,{cols:"12",md:"auto"},{default:t(()=>[e(N,{color:"#1e293b",class:"text-white text-capitalize rounded-lg",height:"40","prepend-icon":"mdi-plus",elevation:"0",onClick:o[3]||(o[3]=a=>i(null))},{default:t(()=>[...o[8]||(o[8]=[c(" Nuevo Cliente ",-1)])]),_:1})]),_:1})]),_:1}),S.value?(I(),z("div",Ve,[e(te,{indeterminate:"",color:"primary",size:"64"})])):b.value.length===0?(I(),z("div",Ce,[l("div",we,[e(A,{size:"48",color:"primary"},{default:t(()=>[...o[9]||(o[9]=[c("mdi-account-tie-outline",-1)])]),_:1}),l("div",he,[e(A,{size:"16",color:"white"},{default:t(()=>[...o[10]||(o[10]=[c("mdi-plus",-1)])]),_:1})])]),o[12]||(o[12]=l("h3",{class:"text-h6 font-weight-bold text-grey-darken-3 mb-2"},"No se encontraron clientes",-1)),o[13]||(o[13]=l("p",{class:"text-body-2 text-grey mb-8",style:{"max-width":"400px"}}," Aún no has registrado ningún cliente. Comienza agregando el primero para gestionar sus sedes y contactos. ",-1)),e(N,{color:"primary",variant:"tonal",class:"text-capitalize rounded-lg px-6",height:"44","prepend-icon":"mdi-plus",onClick:o[4]||(o[4]=a=>i(null))},{default:t(()=>[...o[11]||(o[11]=[c(" Agregar mi primer cliente ",-1)])]),_:1})])):(I(),_(F,{key:2},{default:t(()=>[(I(!0),z(q,null,K(b.value,a=>(I(),_(C,{cols:"12",sm:"6",md:"4",lg:"3",key:a.Id},{default:t(()=>[e(L,{hover:"",onClick:d=>i(a),class:"company-card border-0 elevation-1 h-100 rounded-lg"},{default:t(()=>[l("div",{class:$(["card-status-strip",a.Activo?"bg-success":"bg-grey"])},null,2),e(O,{class:"pa-5"},{default:t(()=>[l("div",ke,[l("div",Ie,h(a.RazonSocial),1)]),l("div",Ae," NIT: "+h(a.NIT),1),e(B,{class:"mb-3"}),l("div",Se,[e(A,{size:"small",start:"",class:"mr-1",color:"grey-lighten-1"},{default:t(()=>[...o[14]||(o[14]=[c("mdi-map-marker",-1)])]),_:1}),l("span",De,h(a.Direccion||"Sin dirección"),1)]),l("div",Ee,[e(A,{size:"small",start:"",class:"mr-1",color:"grey-lighten-1"},{default:t(()=>[...o[15]||(o[15]=[c("mdi-phone",-1)])]),_:1}),c(" "+h(a.Telefono||"Sin teléfono"),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}))]),_:1},8,["style"])]),_:1},8,["class"])]),_:1},8,["modelValue","max-width","fullscreen","transition"]),e(be,{modelValue:n.value,"onUpdate:modelValue":o[6]||(o[6]=a=>n.value=a),company:m.value,onSaved:p},null,8,["modelValue","company"])],64))}},$e=X(Ne,[["__scopeId","data-v-eb6c422e"]]),Te={class:"px-6 pt-6 pb-2 d-flex align-center justify-space-between"},ze={class:"d-flex align-center"},Re={class:"header-icon-box mr-3"},Ue={class:"text-h6 font-weight-bold text-grey-darken-3",style:{"line-height":"1.2"}},_e={class:"text-caption text-grey mt-1"},Le={class:"d-flex align-center"},Oe={__name:"ClientSedeForm",props:{modelValue:Boolean,sede:Object,companies:Array},emits:["update:modelValue","save"],setup(D,{emit:T}){const w=D,{isMobileApp:v}=W(),E=T,g=j({get:()=>w.modelValue,set:o=>E("update:modelValue",o)}),u=f(null),S=f(!1),k=f([]),y=f([]),n=f(null),m=j(()=>w.companies.filter(o=>o.EsCliente===!0)),p=f({EmpresaId:null,NombreSede:"",Direccion:"",Telefono:"",CiudadId:null,Activo:!0});async function b(){try{const o=await U.get("/api/config/departments",{withCredentials:!0});k.value=o.data}catch(o){console.error(o)}}async function i(o){if(!o){y.value=[];return}try{const a=await U.get(`/api/config/cities/${o}`,{withCredentials:!0});y.value=a.data}catch(a){console.error(a)}}async function s(){const{valid:o}=await u.value.validate();if(o){S.value=!0;try{const a=w.sede?`/api/config/sedes/${w.sede.Id}`:"/api/config/sedes",d=w.sede?"put":"post";await U[d](a,p.value,{withCredentials:!0}),E("save"),g.value=!1}catch(a){alert("Error al guardar: "+(a.response?.data?.message||a.message))}finally{S.value=!1}}}return Z(()=>w.sede,async o=>{o?(p.value={...o},n.value=null,y.value=[]):(p.value={EmpresaId:null,NombreSede:"",Direccion:"",Telefono:"",CiudadId:null,Activo:!0},n.value=null,y.value=[])}),H(()=>{b()}),(o,a)=>(I(),_(M,{modelValue:g.value,"onUpdate:modelValue":a[9]||(a[9]=d=>g.value=d),"max-width":V(v)?"100%":"600",fullscreen:V(v),transition:V(v)?"dialog-bottom-transition":"dialog-transition",persistent:""},{default:t(()=>[e(L,{class:$(["rounded-xl elevation-0",{"rounded-0":V(v)}])},{default:t(()=>[l("div",Te,[l("div",ze,[l("div",Re,[e(A,{color:"primary",size:"24"},{default:t(()=>[...a[10]||(a[10]=[c("mdi-office-building-marker",-1)])]),_:1})]),l("div",null,[l("h2",Ue,h(D.sede?"Editar Sede de Cliente":"Registrar Sede de Cliente"),1),l("p",_e," Complete la información para "+h(D.sede?"actualizar la":"dar de alta una nueva")+" sede operativa. ",1)])]),e(N,{icon:"mdi-close",variant:"text",color:"grey-darken-1",density:"comfortable",onClick:a[0]||(a[0]=d=>g.value=!1)})]),e(B,{class:"mx-6 my-2"}),e(O,{class:"px-6 py-2 scroll-container",style:J(V(v)?"height: calc(100vh - 140px); overflow-y: auto;":"max-height: 60vh; overflow-y: auto;")},{default:t(()=>[e(le,{ref_key:"form",ref:u,onSubmit:ee(s,["prevent"])},{default:t(()=>[e(F,{dense:""},{default:t(()=>[e(C,{cols:"12"},{default:t(()=>[a[11]||(a[11]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"CLIENTE ASOCIADO",-1)),e(P,{modelValue:p.value.EmpresaId,"onUpdate:modelValue":a[1]||(a[1]=d=>p.value.EmpresaId=d),items:m.value,"item-title":"RazonSocial","item-value":"Id",placeholder:"Seleccionar cliente...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-account-tie","bg-color":"grey-lighten-5",class:"rounded-lg",rules:[d=>!!d||"Requerido"],"hide-details":"auto"},null,8,["modelValue","items","rules"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[a[12]||(a[12]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"NOMBRE DE LA SEDE",-1)),e(R,{modelValue:p.value.NombreSede,"onUpdate:modelValue":a[2]||(a[2]=d=>p.value.NombreSede=d),placeholder:"Ej. Sede Principal, Planta Norte...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-store-marker-outline","bg-color":"grey-lighten-5",class:"rounded-lg",rules:[d=>!!d||"Requerido"],"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),e(C,{cols:"12",md:"6"},{default:t(()=>[a[13]||(a[13]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"DEPARTAMENTO",-1)),e(P,{modelValue:n.value,"onUpdate:modelValue":[a[3]||(a[3]=d=>n.value=d),i],items:k.value,"item-title":"Nombre","item-value":"Id",placeholder:"Seleccionar...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-outline","bg-color":"grey-lighten-5",class:"rounded-lg","hide-details":"auto"},null,8,["modelValue","items"])]),_:1}),e(C,{cols:"12",md:"6"},{default:t(()=>[a[14]||(a[14]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"CIUDAD",-1)),e(P,{modelValue:p.value.CiudadId,"onUpdate:modelValue":a[4]||(a[4]=d=>p.value.CiudadId=d),items:y.value,"item-title":"Nombre","item-value":"Id",placeholder:"Seleccionar...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker-radius-outline","bg-color":"grey-lighten-5",class:"rounded-lg",disabled:!n.value,rules:[d=>!!d||"Requerido"],"hide-details":"auto"},null,8,["modelValue","items","disabled","rules"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[a[15]||(a[15]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"DIRECCIÓN FÍSICA",-1)),e(R,{modelValue:p.value.Direccion,"onUpdate:modelValue":a[5]||(a[5]=d=>p.value.Direccion=d),placeholder:"Calle, Carrera, Avenida...",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker-outline","bg-color":"grey-lighten-5",class:"rounded-lg","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",md:"6"},{default:t(()=>[a[16]||(a[16]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"TELÉFONO DE CONTACTO",-1)),e(R,{modelValue:p.value.Telefono,"onUpdate:modelValue":a[6]||(a[6]=d=>p.value.Telefono=d),placeholder:"(+57) 601 000 0000",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-phone-outline","bg-color":"grey-lighten-5",class:"rounded-lg","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",md:"6"},{default:t(()=>[a[17]||(a[17]=l("label",{class:"text-caption font-weight-bold text-grey-darken-1 mb-1 d-block"},"ESTADO DE LA SEDE",-1)),l("div",{class:$(["status-box d-flex align-center justify-space-between px-3 py-0 rounded-lg",p.value.Activo?"bg-blue-lighten-5":"bg-grey-lighten-4"])},[l("div",Le,[e(A,{color:p.value.Activo?"primary":"grey",class:"mr-2",size:"16"},{default:t(()=>[c(h(p.value.Activo?"mdi-check-circle":"mdi-minus-circle"),1)]),_:1},8,["color"]),l("span",{class:$(["text-caption font-weight-medium",p.value.Activo?"text-primary":"text-grey-darken-1"])},h(p.value.Activo?"Sede Activa":"Sede Inactiva"),3)]),e(ae,{modelValue:p.value.Activo,"onUpdate:modelValue":a[7]||(a[7]=d=>p.value.Activo=d),color:"primary","hide-details":"",density:"compact",inset:"",class:"scale-switch"},null,8,["modelValue"])],2)]),_:1})]),_:1})]),_:1},512)]),_:1},8,["style"]),e(Q,{class:"px-6 pb-6 pt-4 bg-white"},{default:t(()=>[e(G),e(N,{variant:"text",class:"text-capitalize text-grey-darken-1 mr-2",onClick:a[8]||(a[8]=d=>g.value=!1),density:"comfortable"},{default:t(()=>[...a[18]||(a[18]=[c(" Cancelar ",-1)])]),_:1}),e(N,{color:"blue-grey-darken-4",variant:"flat",class:"text-white text-capitalize rounded-lg px-6",height:"40","prepend-icon":"mdi-content-save-outline",onClick:s,loading:S.value,elevation:"0",density:"comfortable"},{default:t(()=>[c(h(D.sede?"Actualizar":"Guardar"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["class"])]),_:1},8,["modelValue","max-width","fullscreen","transition"]))}},je=X(Oe,[["__scopeId","data-v-5fe6f654"]]),Fe={class:"px-8 pt-8 pb-4 d-flex justify-space-between align-start"},Be={key:0,class:"d-flex justify-center align-center py-12"},Me={key:1,class:"d-flex flex-column align-center justify-center py-12 text-center"},Pe={class:"empty-state-icon mb-6"},qe={class:"plus-badge"},Ge={class:"d-flex justify-space-between align-start mb-3"},We={class:"text-subtitle-1 font-weight-bold text-grey-darken-3 text-truncate"},Xe={class:"text-caption text-grey-darken-1 mb-2 font-weight-medium d-flex align-center"},Ze={class:"text-truncate"},He={class:"text-caption text-grey mb-1 d-flex align-center"},Je={class:"text-truncate"},Ke={class:"text-caption text-grey d-flex align-center"},Qe={__name:"ClientSedeList",props:{modelValue:Boolean},emits:["update:modelValue"],setup(D,{emit:T}){const w=D,{isMobileApp:v}=W(),E=T,g=j({get:()=>w.modelValue,set:d=>E("update:modelValue",d)}),u=f([]),S=f([]),k=f(""),y=f(!1),n=f(null),m=f(!1),p=j(()=>{let d=u.value.filter(r=>{const x=S.value.find(Y=>Y.Id===r.EmpresaId);return x&&x.EsCliente===!0});if(k.value){const r=k.value.toLowerCase();d=d.filter(x=>x.NombreSede.toLowerCase().includes(r)||x.Direccion&&x.Direccion.toLowerCase().includes(r))}return d});function b(d){const r=S.value.find(x=>x.Id===d);return r?r.RazonSocial:"Desconocida"}async function i(){m.value=!0;try{const[d,r]=await Promise.all([U.get("/api/config/sedes",{withCredentials:!0}),U.get("/api/config/companies",{withCredentials:!0})]);u.value=d.data,S.value=r.data}catch(d){console.error("Error cargando datos:",d)}finally{m.value=!1}}function s(){n.value=null,y.value=!0}function o(d){n.value={...d},y.value=!0}async function a(){await i(),y.value=!1}return Z(g,d=>{d&&i()},{immediate:!0}),H(()=>{g.value&&i()}),(d,r)=>(I(),z(q,null,[e(M,{modelValue:g.value,"onUpdate:modelValue":r[2]||(r[2]=x=>g.value=x),"max-width":V(v)?"100%":"1100",fullscreen:V(v),transition:V(v)?"dialog-bottom-transition":"dialog-transition",scrollable:""},{default:t(()=>[e(L,{class:$(["rounded-xl elevation-24",{"rounded-0":V(v)}])},{default:t(()=>[l("div",Fe,[r[4]||(r[4]=l("div",null,[l("h2",{class:"text-h5 font-weight-bold text-grey-darken-3 mb-1"},"Sedes de Clientes"),l("p",{class:"text-body-2 text-grey"},"Gestiona las ubicaciones y oficinas de tus clientes.")],-1)),e(N,{icon:"mdi-close",variant:"text",color:"grey",onClick:r[0]||(r[0]=x=>g.value=!1)})]),e(B,{class:"mx-8"}),e(O,{class:"px-8 py-6 bg-grey-lighten-5",style:J(V(v)?"height: calc(100vh - 140px);":"")},{default:t(()=>[e(F,{class:"mb-6 align-center"},{default:t(()=>[e(C,{cols:"12",md:"5"},{default:t(()=>[e(R,{modelValue:k.value,"onUpdate:modelValue":r[1]||(r[1]=x=>k.value=x),"prepend-inner-icon":"mdi-magnify",label:"Buscar por nombre o dirección",variant:"outlined",density:"compact","hide-details":"","bg-color":"white",color:"primary",class:"rounded-lg"},null,8,["modelValue"])]),_:1}),e(G),e(C,{cols:"12",md:"auto"},{default:t(()=>[e(N,{color:"#1e293b",class:"text-white text-capitalize rounded-lg",height:"40","prepend-icon":"mdi-plus",elevation:"0",onClick:s},{default:t(()=>[...r[5]||(r[5]=[c(" Nueva Sede ",-1)])]),_:1})]),_:1})]),_:1}),m.value?(I(),z("div",Be,[e(te,{indeterminate:"",color:"primary",size:"64"})])):p.value.length===0?(I(),z("div",Me,[l("div",Pe,[e(A,{size:"48",color:"primary"},{default:t(()=>[...r[6]||(r[6]=[c("mdi-office-building-marker-outline",-1)])]),_:1}),l("div",qe,[e(A,{size:"16",color:"white"},{default:t(()=>[...r[7]||(r[7]=[c("mdi-plus",-1)])]),_:1})])]),r[9]||(r[9]=l("h3",{class:"text-h6 font-weight-bold text-grey-darken-3 mb-2"},"No se encontraron sedes",-1)),r[10]||(r[10]=l("p",{class:"text-body-2 text-grey mb-8",style:{"max-width":"400px"}}," No hay sedes de clientes registradas que coincidan con tu búsqueda. ",-1)),e(N,{color:"primary",variant:"tonal",class:"text-capitalize rounded-lg px-6",height:"44","prepend-icon":"mdi-plus",onClick:s},{default:t(()=>[...r[8]||(r[8]=[c(" Agregar primera sede ",-1)])]),_:1})])):(I(),_(F,{key:2},{default:t(()=>[(I(!0),z(q,null,K(p.value,x=>(I(),_(C,{cols:"12",sm:"6",md:"4",lg:"3",key:x.Id},{default:t(()=>[e(L,{hover:"",onClick:Y=>o(x),class:"company-card border-0 elevation-1 h-100 rounded-lg"},{default:t(()=>[l("div",{class:$(["card-status-strip",x.Activo?"bg-success":"bg-grey"])},null,2),e(O,{class:"pa-5"},{default:t(()=>[l("div",Ge,[l("div",We,h(x.NombreSede),1)]),l("div",Xe,[e(A,{size:"small",start:"",class:"mr-1"},{default:t(()=>[...r[11]||(r[11]=[c("mdi-account-tie",-1)])]),_:1}),l("span",Ze,h(b(x.EmpresaId)),1)]),e(B,{class:"mb-3"}),l("div",He,[e(A,{size:"small",start:"",class:"mr-1",color:"grey-lighten-1"},{default:t(()=>[...r[12]||(r[12]=[c("mdi-map-marker",-1)])]),_:1}),l("span",Je,h(x.Direccion||"Sin dirección"),1)]),l("div",Ke,[e(A,{size:"small",start:"",class:"mr-1",color:"grey-lighten-1"},{default:t(()=>[...r[13]||(r[13]=[c("mdi-phone",-1)])]),_:1}),c(" "+h(x.Telefono||"Sin teléfono"),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}))]),_:1},8,["style"])]),_:1},8,["class"])]),_:1},8,["modelValue","max-width","fullscreen","transition"]),e(je,{modelValue:y.value,"onUpdate:modelValue":r[3]||(r[3]=x=>y.value=x),sede:n.value,onSaved:a},null,8,["modelValue","sede"])],64))}},Ye=X(Qe,[["__scopeId","data-v-a11e8ddc"]]),et={class:"w-100"},tt={class:"mb-8"},lt={class:"text-caption text-grey mb-1"},at={class:"mb-8"},ot={class:"d-flex align-center mb-4"},it={class:"text-subtitle-2 font-weight-bold text-grey-darken-3 mb-0 line-height-tight"},nt={__name:"ClientConfig",setup(D){const{isMobileApp:T}=W();oe();const w=f(!1),v=f(!1),E=f(!1),g=f(!1),u=f(""),S=[{title:"Clientes",icon:"mdi-account-tie",action:"clients",color:"indigo"},{title:"Sedes Clientes",icon:"mdi-office-building-marker",action:"client_sedes",color:"indigo"},{title:"Contactos",icon:"mdi-card-account-details",action:"contacts",color:"indigo"}];function k(y){if(y.action==="contacts"){v.value=!0;return}if(y.action==="clients"){E.value=!0;return}if(y.action==="client_sedes"){g.value=!0;return}u.value=y.title,w.value=!0}return(y,n)=>(I(),_(ue,{fluid:"",class:"bg-grey-lighten-5 fill-height align-start"},{default:t(()=>[l("div",et,[l("div",tt,[l("div",lt,[e(A,{size:"small",class:"mr-1"},{default:t(()=>[...n[6]||(n[6]=[c("mdi-home",-1)])]),_:1}),n[7]||(n[7]=c(" / Configuración / Clientes ",-1))]),n[8]||(n[8]=l("h1",{class:"text-h4 font-weight-bold text-primary mb-1"}," Gestión de Clientes ",-1)),n[9]||(n[9]=l("p",{class:"text-body-1 text-grey-darken-1"}," Administra el directorio de clientes, sus sedes y contactos. ",-1))]),l("div",at,[l("div",ot,[e(A,{color:"primary",class:"mr-2"},{default:t(()=>[...n[10]||(n[10]=[c("mdi-account-group",-1)])]),_:1}),n[11]||(n[11]=l("h2",{class:"text-h6 font-weight-bold text-grey-darken-3"},"Directorio",-1))]),e(F,null,{default:t(()=>[(I(),z(q,null,K(S,m=>e(C,{cols:"12",sm:"6",md:"3",lg:"2",key:m.title},{default:t(()=>[ie((I(),_(L,{class:"config-card border-0 elevation-1",height:"120",onClick:p=>k(m)},{default:t(()=>[l("div",{class:$(["card-corner-decoration",`bg-${m.color}-lighten-5`])},[e(A,{size:"small",color:m.color},{default:t(()=>[...n[12]||(n[12]=[c("mdi-chevron-right",-1)])]),_:1},8,["color"])],2),e(O,{class:"pa-3 d-flex flex-column justify-space-between h-100"},{default:t(()=>[l("div",{class:$(["icon-box",`bg-${m.color}-lighten-5`])},[e(A,{size:"24",color:m.color},{default:t(()=>[c(h(m.icon),1)]),_:2},1032,["color"])],2),l("div",null,[l("div",it,h(m.title),1),n[13]||(n[13]=l("div",{class:"text-caption text-grey",style:{"font-size":"0.7rem !important"}},"Administrar",-1))])]),_:2},1024)]),_:2},1032,["onClick"])),[[de]])]),_:2},1024)),64))]),_:1})])]),e(M,{modelValue:w.value,"onUpdate:modelValue":n[1]||(n[1]=m=>w.value=m),"max-width":"600"},{default:t(()=>[e(L,null,{default:t(()=>[e(se,null,{default:t(()=>[...n[14]||(n[14]=[c("En Construcción",-1)])]),_:1}),e(O,null,{default:t(()=>[n[15]||(n[15]=c(" La funcionalidad ",-1)),l("strong",null,h(u.value),1),n[16]||(n[16]=c(" está siendo implementada. ",-1))]),_:1}),e(Q,null,{default:t(()=>[e(G),e(N,{color:"primary",onClick:n[0]||(n[0]=m=>w.value=!1)},{default:t(()=>[...n[17]||(n[17]=[c("Cerrar",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(M,{modelValue:v.value,"onUpdate:modelValue":n[3]||(n[3]=m=>v.value=m),fullscreen:V(T),"max-width":V(T)?"100%":"1200px",transition:"dialog-bottom-transition"},{default:t(()=>[e(ne,{modelValue:v.value,"onUpdate:modelValue":n[2]||(n[2]=m=>v.value=m),"filter-roles":["ADMINISTRADOR CLIENTE","SOPORTE CLIENTE","AUDITOR EXTERNO"],title:"Gestión de Contactos","client-mode":"","is-mobile-device":V(T)},null,8,["modelValue","is-mobile-device"])]),_:1},8,["modelValue","fullscreen","max-width"]),e($e,{modelValue:E.value,"onUpdate:modelValue":n[4]||(n[4]=m=>E.value=m)},null,8,["modelValue"]),e(Ye,{modelValue:g.value,"onUpdate:modelValue":n[5]||(n[5]=m=>g.value=m)},null,8,["modelValue"])]),_:1}))}},wt=X(nt,[["__scopeId","data-v-ab1d11e2"]]);export{wt as default};
